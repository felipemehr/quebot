<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>QueBot [LAB] - Asistente Inteligente</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=lab-purple-2">
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAADFklEQVRYhcWXTWgUZxjHf887HztLdqfRXRcFP9DWalsaCoVgpHrQm20PSqIgaPHr6qX01CILDeTSUmjoqdiiQbCt5mKLNxvEqoGCtaUk5qOlUPNRXeOabTLZzMzbwzYqZk12N9nd/2mYZ2b+v+d9n+d5GeEppbePpXzsk6DfRrMZoYHlURboE9HnHrqJLzsvy8xcQOYuPmzJtIlwGogvk2lRCfT7Wu/tuJHsfwzwv/k3TwNVWRmCoKW9NzUohWW3hqhy5vMk/GpaK99UhT2vsTmApsnPPzikQL9Tc/PHEHJYAS/WDUD0GwqI1Q0AGlUdzQEwy3lYGbChySKxThGGMD4ccLfPrw3A+iaT1lMxonFh/I8AZcDqlwzGhwO+PZVjYjSsHkBincHhT+NcP+9x9ew0/mzhvhMT3n2/gSOfu3zxXpaZKV02QEk1sPt4lDvXZrly+ok5gJfTXGzP4eU029qcss1LArAiwis7LW585xWNhwH0dnu8vtuuDkBqk4HWMNL//GL767ZPaqOBFSl+lKRWD7Fz11eVAbhJxeS9kHCBGsuOh4iCWKI4gG1PE3UeVQagTPAX6TR/tlB8plX+YboowMy/mmhs4Q9H44W4l6tCF2T+DoglFM4CEKs2GMxMaXIT5c+CRQEmRkKyYyFbdzypclHQvDeCaRegtu6w+fOWj65gFpU0B25e8Nh1LErULRgqA5r3ORzsiLHmZYPmfRFuPqdNAcZGttB7/UDRmHy0PbPoxhkmHPokzoo1iqtdHqODAW5S2P9xDNMSers9fvhsqpRc5qmkURz40PXBJC1tDi0HHJLrDXSoGR0IcOJCYq2BaQt+vngu7gv/sHHTz9y+tWderKQVWEgNjcKRTpffr+T58evpst9fMgCA7RRqI+9V1obZpQLkPV2ROfBIgf5lqQCVSw8rRLrqZS9aLinTWnkG+K0O/lkjYnWqdI/4gQpbgUwNzTWij6Z73PsKoOPaqoFA67eAvhqYZxHd2v5Tshue+RlNv6Zt382cQOQg8CrQuEymOZAB0fp7I2J1pnvc+3OB/wACJAghqLhxXgAAAABJRU5ErkJggg==">
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,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">
    <link rel="stylesheet" href="css/styles.css?v=20260221c">
    <link rel="stylesheet" href="css/auth.css?v=20260221c">
    <link rel="stylesheet" href="css/renders.css?v=20260221c">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Overlay (mobile) -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo" style="cursor:pointer" onclick="if(typeof App!=='undefined') App.newChat(); else location.reload();" title="Nueva conversación">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                    </svg>
                    <span class="logo-text">QueBot</span>
                    <span class="logo-badge">beta</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" title="Colapsar sidebar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 19l-7-7 7-7"/>
                        <path d="M18 19l-7-7 7-7"/>
                    </svg>
                </button>
            </div>
            
            <button class="new-chat-btn" id="newChatBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
                <span>Nueva Misión</span>
            </button>
            
            <div class="chat-history" id="chatHistory">
                <div class="history-section">
                    <div class="history-label">Hoy</div>
                    <div class="history-items" id="todayChats"></div>
                </div>
                <div class="history-section">
                    <div class="history-label">Anteriores</div>
                    <div class="history-items" id="olderChats"></div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <button class="theme-toggle" id="themeToggle" title="Cambiar tema">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <div class="user-info" id="userInfo" title="Clic para ver opciones de cuenta">
                    <div class="user-avatar">?</div>
                    <span class="user-name">Invitado</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="chat-container" id="chatContainer">
                <!-- Chat Header -->
                <header class="chat-header">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12h18M3 6h18M3 18h18"/>
                        </svg>
                    </button>
                    <h1 class="chat-title" id="chatTitle">Nueva Misión</h1>
                    <div class="chat-actions">
                        <button class="action-btn" id="previewToggle" title="Panel de visualización">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <path d="M9 3v18"/>
                            </svg>
                        </button>
                    </div>
                </header>

                <!-- Messages Area -->
                <div class="messages-area" id="messagesArea">
                    <div class="welcome-screen" id="welcomeScreen">
                        <!-- Hero -->
                        <div class="hero-section">
                            <h1 class="hero-title">Cuéntale a QueBot lo que necesitas.<br>El resto se resuelve.</h1>
                            <p class="hero-subtitle">Analiza, busca, compara y ordena tu problema. Cuando hace falta, lo escala a una persona real con todo el contexto listo.</p>
                        </div>

                        <!-- Block A: Quick Actions -->
                        <div class="dashboard-section">
                            <div class="quick-actions-grid">
                                <button class="action-card" data-card-type="property" data-prompt="Busca propiedades en la zona que me interesa" data-default-prompt="Busca propiedades en la zona que me interesa">
                                    <div class="action-card-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                                            <circle cx="12" cy="10" r="3"/>
                                        </svg>
                                    </div>
                                    <span class="action-card-label">Buscar propiedades</span>
                                </button>
                                <button class="action-card" data-card-type="prices" data-prompt="Compara precios del dólar, UF y euro en Chile" data-default-prompt="Compara precios del dólar, UF y euro en Chile">
                                    <div class="action-card-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M18 20V10"/>
                                            <path d="M12 20V4"/>
                                            <path d="M6 20v-6"/>
                                        </svg>
                                    </div>
                                    <span class="action-card-label">Comparar precios</span>
                                </button>
                                <button class="action-card" data-card-type="news" data-prompt="Noticias de Chile hoy" data-default-prompt="Noticias de Chile hoy">
                                    <div class="action-card-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2"/>
                                        </svg>
                                    </div>
                                    <span class="action-card-label">Noticias y contexto</span>
                                </button>
                                <button class="action-card" data-card-type="code" data-prompt="Ayúdame a analizar datos o escribir código" data-default-prompt="Ayúdame a analizar datos o escribir código">
                                    <div class="action-card-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <polyline points="16,18 22,12 16,6"/>
                                            <polyline points="8,6 2,12 8,18"/>
                                        </svg>
                                    </div>
                                    <span class="action-card-label">Programación y análisis</span>
                                </button>
                            </div>
                        </div>

                        <!-- Block B: How It Works -->
                        <div class="dashboard-section">
                            <div class="how-it-works">
                                <div class="how-step">
                                    <div class="how-step-number">1</div>
                                    <h3>Le cuentas el problema</h3>
                                    <p>Descríbelo en lenguaje normal. Mientras más contexto, mejor.</p>
                                </div>
                                <div class="how-step">
                                    <div class="how-step-number">2</div>
                                    <h3>La IA ordena el caos</h3>
                                    <p>Hace preguntas precisas, resume y compara opciones reales.</p>
                                </div>
                                <div class="how-step">
                                    <div class="how-step-number">3</div>
                                    <h3>Si hace falta, interviene un humano</h3>
                                    <p>Para cerrar o ejecutar en el mundo real.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Block C: Recent Cases -->
                        <div class="dashboard-section" id="recentCasesSection">
                            <h2 class="section-title">Casos recientes</h2>
                            <div class="recent-cases-grid" id="recentCasesGrid">
                                <p class="no-cases-msg">Aún no tienes casos activos.</p>
                            </div>
                        </div>

                        <!-- Block D: Capabilities -->
                        <div class="dashboard-section">
                            <h2 class="section-title">Qué puedes hacer con QueBot</h2>
                            <div class="capabilities-list">
                                <div class="capability-item">Autos y propiedades</div>
                                <div class="capability-item">Viajes y experiencias</div>
                                <div class="capability-item">Servicios profesionales</div>
                                <div class="capability-item">Preguntas raras (bienvenidas)</div>
                            </div>
                        </div>
                    </div>
                    <div class="messages-list" id="messagesList"></div>
                </div>

                <!-- Input Area -->
                <div class="input-area">
                    <div class="input-container">
                        <div class="input-wrapper">
                            <button class="attach-btn" id="attachBtn" title="Adjuntar archivo">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                                </svg>
                            </button>
                            <textarea
                                class="message-input"
                                id="messageInput"
                                placeholder="Escribe tu mensaje..."
                                rows="1"
                            ></textarea>
                            <button class="send-btn" id="sendBtn" disabled title="Enviar mensaje">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 2L11 13"/>
                                    <path d="M22 2l-7 20-4-9-9-4 20-7z"/>
                                </svg>
                            </button>
                        </div>
                        <input type="file" id="fileInput" hidden multiple>
                        <div class="attached-files" id="attachedFiles"></div>
                    </div>
                    <p class="input-disclaimer">QueBot puede cometer errores. Verifica la información importante.</p>
                </div>
            </div>

            <!-- Preview Panel (Sidebar for visualizations) -->
            <aside class="preview-panel" id="previewPanel">
                <div class="preview-header">
                    <h3 id="previewTitle">Visualización</h3>
                    <button class="close-preview" id="closePreview">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18"/>
                            <path d="M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                <div class="preview-content" id="previewContent">
                    <div class="preview-placeholder">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        <p>Los mapas, gráficos y tablas aparecerán aquí</p>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Toast notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script src="js/database.js?v=20260221c"></script>
    <script src="js/firebase.js?v=20260221c"></script>
    <script src="js/storage.js?v=20260221c"></script>
    <script src="js/api.js?v=20260221c"></script>
    <script src="js/ui.js?v=20260221c"></script>
    <script src="js/viz.js?v=20260221c"></script>
    <script src="js/renders.js?v=20260221c"></script>
    <script src="js/app.js?v=20260221c"></script>
</body>
</html>
